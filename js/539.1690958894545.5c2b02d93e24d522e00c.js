"use strict";(self.webpackChunksandbox=self.webpackChunksandbox||[]).push([[539],{5510:(e,t,n)=>{n.d(t,{Z:()=>H});var r=n(3264),a=n.n(r),o=n(1663),i=n(1242),u=n(5564),c=n.n(u),l=function(e){var t,n;return(c().isAxiosError(e)?(null===(n=null===(t=e.response)||void 0===t?void 0:t.data)||void 0===n?void 0:n.message)||e.message:"object"==typeof e?null==e?void 0:e.toString():"string"==typeof e?e:"")||""},s=function(){return s=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},s.apply(this,arguments)},p=(0,r.lazy)((function(){return n.e(945).then(n.bind(n,1300))})),f=(0,r.lazy)((function(){return n.e(196).then(n.bind(n,3842))})),d=[{path:"no-permissions",element:(0,r.lazy)((function(){return n.e(452).then(n.bind(n,1711))}))},{path:"oops",element:f},{path:"/",element:p}],v=function(e){return void 0===e&&(e=[]),e.map((function(e){var t=e.path,n=e.element,r=e.childRoutes,i=e.elementProps;return a().createElement(o.Route,{key:t,path:t,element:a().createElement(n,s({},i))},v(r))}))};const m=function(){var e=(0,r.useMemo)((function(){return v(d)}),[d]);return a().createElement(r.Suspense,{fallback:a().createElement(i.Bullseye,null,a().createElement(i.Spinner,null))},a().createElement(o.Routes,null,e,a().createElement(o.Route,{path:"*",element:a().createElement(o.Navigate,{replace:!0,to:"/openshift/sandbox"})})))};var h=n(3719),b=n(5160),y=n(3215),g=n(5140),E=n(8446),x=n.n(E),w=n(9026),S=function(){return S=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},S.apply(this,arguments)},C=c().create();C.interceptors.request.use((function(e){return S({baseURL:"https://registration-service-toolchain-host-operator.apps.sandbox.x8i5.p1.openshiftapps.com"},e)})),C.interceptors.request.use((function(e){return window.insights.chrome.auth.getToken().then((function(t){return t?S(S({},e),{headers:S({Accept:"application/json",Authorization:"Bearer ".concat(t)},e.headers)}):e}))}));var k=function(e,t,n,r){return new(n||(n=Promise))((function(a,o){function i(e){try{c(r.next(e))}catch(e){o(e)}}function u(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,u)}c((r=r.apply(e,t||[])).next())}))},T=function(e,t){var n,r,a,o,i={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return o={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function u(o){return function(u){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(a=2&o[0]?r.return:o[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,o[1])).done)return a;switch(r=0,a&&(o=[2&o[0],a.value]),o[0]){case 0:case 1:a=o;break;case 4:return i.label++,{value:o[1],done:!1};case 5:i.label++,r=o[1],o=[0];continue;case 7:o=i.ops.pop(),i.trys.pop();continue;default:if(!((a=(a=i.trys).length>0&&a[a.length-1])||6!==o[0]&&2!==o[0])){i=0;continue}if(3===o[0]&&(!a||o[1]>a[0]&&o[1]<a[3])){i.label=o[1];break}if(6===o[0]&&i.label<a[1]){i.label=a[1],a=o;break}if(a&&i.label<a[2]){i.label=a[2],i.ops.push(o);break}a[2]&&i.ops.pop(),i.trys.pop();continue}o=t.call(e,i)}catch(e){o=[6,e],r=0}finally{n=a=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,u])}}},O="/api/v1/signup",A="/api/v1/signup/verification",R=function(){return k(void 0,void 0,Promise,(function(){var e,t;return T(this,(function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),[4,C.get(O)];case 1:return[2,n.sent().data];case 2:if(e=n.sent(),c().isAxiosError(e)&&404===(null===(t=e.response)||void 0===t?void 0:t.status))return[2,void 0];throw e;case 3:return[2]}}))}))},I=function(e,t){return k(void 0,void 0,void 0,(function(){return T(this,(function(n){switch(n.label){case 0:if(!P(e))throw"Invalid country code.";if(!j(t))throw"Invalid phone number.";return[4,C.put(A,{country_code:e,phone_number:t})];case 1:return n.sent(),[2]}}))}))},P=function(e){return/^[+]?[0-9]+$/.test(e)},j=function(e){return/^[(]?[0-9]+[)]?[-\s.]?[0-9]+[-\s./0-9]*$/im.test(e)},L=n(9225),D=n(8614),N=function(){return N=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},N.apply(this,arguments)};const V=function(e){return r.createElement("div",{className:"pf-u-pt-xl pf-u-pt-md pf-u-text-align-center"},r.createElement(i.Button,N({},e,{className:"pf-u-w-100 pf-u-w-initial-on-sm"})))},G=n.p+"fonts/launch-sandbox-success.svg";var B=n(2749),F=n(7434),M=function(e,t,n,r){return new(n||(n=Promise))((function(a,o){function i(e){try{c(r.next(e))}catch(e){o(e)}}function u(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,u)}c((r=r.apply(e,t||[])).next())}))},q=function(e,t){var n,r,a,o,i={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return o={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function u(o){return function(u){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(a=2&o[0]?r.return:o[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,o[1])).done)return a;switch(r=0,a&&(o=[2&o[0],a.value]),o[0]){case 0:case 1:a=o;break;case 4:return i.label++,{value:o[1],done:!1};case 5:i.label++,r=o[1],o=[0];continue;case 7:o=i.ops.pop(),i.trys.pop();continue;default:if(!((a=(a=i.trys).length>0&&a[a.length-1])||6!==o[0]&&2!==o[0])){i=0;continue}if(3===o[0]&&(!a||o[1]>a[0]&&o[1]<a[3])){i.label=o[1];break}if(6===o[0]&&i.label<a[1]){i.label=a[1],a=o;break}if(a&&i.label<a[2]){i.label=a[2],i.ops.push(o);break}a[2]&&i.ops.pop(),i.trys.pop();continue}o=t.call(e,i)}catch(e){o=[6,e],r=0}finally{n=a=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,u])}}};const Z=function(e){var t=e.onClose,n=e.initialStatus;r.useEffect((function(){!function(){var e="https://www.google.com/recaptcha/enterprise.js?render=".concat("6LdL7aMlAAAAALvuuAZWjwlOLRKMCIrWjOpv-U3G");if(!document.querySelector('script[src="'.concat(e,'"]'))){var t=document.createElement("script");t.type="text/javascript",t.src=e,t.async=!0,t.defer=!0,document.head.appendChild(t)}}()}),[]);var a=(0,B.K)(),o=r.useState(n&&"unknown"!==n?n:"new"),u=o[0],c=o[1],s=r.useState(),p=s[0],f=s[1],d=r.useState(""),v=d[0],m=d[1],h=r.useState(!1),b=h[0],y=h[1],g=r.useState(""),E=g[0],x=g[1],w=r.useState(""),S=w[0],N=w[1],Z=r.useState(!1),W=Z[0],H=Z[1],K=r.useState(!1),z=K[0],J=K[1],U=r.useState(),X=U[0],_=U[1],Y=r.useCallback((function(){return M(void 0,void 0,void 0,(function(){var e,t;return q(this,(function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),[4,R()];case 1:return e=n.sent(),_(e),null==e?c("new"):!0===e.status.ready?c("ready"):!1===e.status.ready&&e.status.verificationRequired?c((function(e){return"verify"!==e&&"verifyCode"!==e?"verify":e})):!1===e.status.ready&&"Provisioning"===e.status.reason?c("provisioning"):c("pending-approval"),[3,3];case 2:return t=n.sent(),f(l(t)),[3,3];case 3:return[2]}}))}))}),[]);return r.useEffect((function(){if("provisioning"===u||"pending-approval"===u){var e=setInterval(Y,1e3);return function(){clearInterval(e)}}}),[u]),r.useEffect((function(){p&&a("DevSandbox Signup Error",{error:p})}),[p]),r.useEffect((function(){a("DevSandbox Signup Step",{step:u})}),[u]),r.createElement(i.Modal,{"data-testid":"registration-modal",width:600,"aria-labelledby":"registration-modal-title",header:r.createElement(i.Title,{id:"registration-modal-title",headingLevel:"h1"},"ready"===u?"Congratulations, you're ready to get started!":"Activate your free 30 days trial"),isOpen:!0,onClose:function(){return t(X)}},p?r.createElement(i.Alert,{title:"An error occurred",variant:i.AlertVariant.danger,actionClose:r.createElement(i.AlertActionCloseButton,{onClose:function(){return f(void 0)}}),isInline:!0,className:"pf-u-mb-lg"},p):null,function(){switch(u){case"new":return r.createElement(r.Fragment,null,r.createElement(i.TextContent,null,r.createElement(i.Text,{component:i.TextVariants.p},"Join the vibrant community of Red Hat Developer Tools program. The free annual subscription provides access to developer resources such as Red Hat software downloads, ebooks, interactive tutorials, and interactive events with Red Hat experts.")),r.createElement("div",{className:"pf-u-pt-lg pf-u-pt-md pf-u-text-align-center"},r.createElement(i.Checkbox,{"aria-label":"Join the Red Hat Developers program",id:"accept-join",isChecked:z,onChange:function(e){f(void 0),J(e)},className:"pf-u-mr-sm"}),"Join the"," ",r.createElement(i.Button,{variant:i.ButtonVariant.link,isInline:!0,component:"a",href:"https://developers.redhat.com/about",target:"_blank",rel:"noopener"},"Red Hat Developers program ",r.createElement(L.LA,null))),r.createElement(V,{isDisabled:b||!z,isLoading:b,onClick:function(){return M(void 0,void 0,void 0,(function(){var e;return q(this,(function(t){switch(t.label){case 0:return t.trys.push([0,3,4,5]),f(void 0),y(!0),[4,k(void 0,void 0,void 0,(function(){var e;return T(this,(function(t){switch(t.label){case 0:return[4,k(void 0,void 0,Promise,(function(){return T(this,(function(e){return[2,new Promise((function(e,t){var n=!1,r=setTimeout((function(){n=!0,t("Recaptcha timeout.")}),1e4);(null===grecaptcha||void 0===grecaptcha?void 0:grecaptcha.enterprise)?grecaptcha.enterprise.ready((function(){return k(void 0,void 0,void 0,(function(){var a;return T(this,(function(o){switch(o.label){case 0:if(n)return[3,4];clearTimeout(r),o.label=1;case 1:return o.trys.push([1,3,,4]),a=e,[4,grecaptcha.enterprise.execute("6LdL7aMlAAAAALvuuAZWjwlOLRKMCIrWjOpv-U3G",{action:"SIGNUP"})];case 2:return a.apply(void 0,[o.sent()]),[3,4];case 3:return o.sent(),t("Recaptcha failure."),[3,4];case 4:return[2]}}))}))})):t("Recaptcha failure.")}))]}))}))];case 1:return e=t.sent(),[4,C.post(O,null,{headers:{"Recaptcha-Token":e}})];case 2:return t.sent(),[2]}}))}))];case 1:return t.sent(),[4,Y()];case 2:return t.sent(),[3,5];case 3:return e=t.sent(),f(l(e)),[3,5];case 4:return y(!1),[7];case 5:return[2]}}))}))}},"Activate"));case"verify":return r.createElement(r.Fragment,null,r.createElement(i.TextContent,null,r.createElement(i.Text,{component:i.TextVariants.p},"We are preparing your Sandbox. It will be available shortly."),r.createElement(i.Text,{component:i.TextVariants.p},"One more thing, to ensure your account is secure please enter a valid phone number for SMS verification.")),r.createElement(i.Form,null,r.createElement(i.Grid,{hasGutter:!0,className:"pf-u-mt-md",style:{alignItems:"end"}},r.createElement(i.GridItem,{span:3},r.createElement(i.FormGroup,{label:"Country code",isRequired:!0},r.createElement(i.TextInput,{"aria-label":"Country code",isRequired:!0,validated:!E||P(E)?"default":"error",type:"text",placeholder:"+01",minLength:1,maxLength:4,value:E,onChange:function(e){f(void 0),x(e)}}))),r.createElement(i.GridItem,{span:9},r.createElement(i.FormGroup,{label:"Phone number",isRequired:!0},r.createElement(i.TextInput,{"aria-label":"Phone number",isRequired:!0,validated:!S||j(S)?"default":"error",type:"tel",placeholder:"123-456-7890",minLength:6,maxLength:32,value:S,onChange:function(e){f(void 0),N(e)}}))))),r.createElement(V,{isDisabled:b||!P(E)||!j(S),onClick:function(){return M(void 0,void 0,void 0,(function(){var e;return q(this,(function(t){switch(t.label){case 0:return t.trys.push([0,2,3,4]),f(void 0),y(!0),[4,I(E,S)];case 1:return t.sent(),c("verifyCode"),[3,4];case 2:return e=t.sent(),f(l(e)),[3,4];case 3:return y(!1),[7];case 4:return[2]}}))}))}},"Next"));case"verifyCode":return r.createElement(r.Fragment,null,r.createElement(i.TextContent,null,r.createElement(i.Text,{component:i.TextVariants.p},"We are preparing your Sandbox. It will be available shortly."),r.createElement(i.Text,{component:i.TextVariants.p},'We sent a verification code to "',r.createElement("b",null,"".concat(E," ").concat(S)),'"')),r.createElement(i.Form,null,r.createElement(i.FormGroup,{label:"Verification code",isRequired:!0,className:"pf-u-mt-md pf-u-mb-md"},r.createElement(i.TextInput,{"aria-label":"Veritification code",isRequired:!0,validated:v&&6!==v.length?"error":"default",minLength:6,maxLength:6,placeholder:"XXXXXX",value:v||"",onChange:function(e){f(void 0),H(!1),m(e)}}))),r.createElement(i.TextContent,null,r.createElement(i.Text,{component:i.TextVariants.p},"No text received?"," ",r.createElement(F.Z,{isInline:!0,variant:i.ButtonVariant.link,onClick:function(){f(void 0),m(""),I(E,S),H(!0)},analytics:{event:"DevSandbox Signup Resend Code"}},"Resend code"),W?r.createElement(D.nQ,{className:"pf-u-ml-md",style:{color:"var(--pf-global--success-color--100)"}}):null,r.createElement("br",null),"Or"," ",r.createElement(i.Button,{isInline:!0,variant:i.ButtonVariant.link,onClick:function(){f(void 0),c("verify"),m("")}},"use a different phone number"))),r.createElement(V,{isDisabled:b||6!==v.length,onClick:function(){return M(void 0,void 0,void 0,(function(){var e;return q(this,(function(t){switch(t.label){case 0:return t.trys.push([0,3,4,5]),f(void 0),y(!0),[4,(n=v,k(void 0,void 0,void 0,(function(){return T(this,(function(e){switch(e.label){case 0:return[4,C.get("".concat(A,"/").concat(n))];case 1:return e.sent(),[2]}}))})))];case 1:return t.sent(),[4,Y()];case 2:return t.sent(),[3,5];case 3:return e=t.sent(),f(l(e)||"Error while sending verification code. Please try again."),[3,5];case 4:return y(!1),[7];case 5:return[2]}var n}))}))}},"Next"));case"provisioning":return r.createElement(r.Fragment,null,r.createElement(i.TextContent,null,r.createElement(i.Text,{component:i.TextVariants.p},"We are preparing your Sandbox. It will be available shortly.")),r.createElement(i.Bullseye,{className:"pf-u-mt-2xl pf-u-mb-lg"},r.createElement(i.Spinner,{isSVG:!0,size:"xl"})),r.createElement(V,{isDisabled:!0},"Launch Sandbox"));case"pending-approval":return r.createElement(r.Fragment,null,r.createElement(i.TextContent,null,r.createElement("p",null,"Your Sandbox account is waiting for approval.")),r.createElement(i.Bullseye,{className:"pf-u-mt-2xl pf-u-mb-lg"},r.createElement(i.Spinner,{isSVG:!0,size:"xl"})),r.createElement(V,{onClick:function(){return t(X)}},"Close"));case"ready":return r.createElement(r.Fragment,null,r.createElement(i.TextContent,null,r.createElement(i.Text,{component:i.TextVariants.p},"Your Sandbox will be activate for the next 30 days. Jump right in and start building!")),r.createElement("div",{className:"pf-u-p-md"},r.createElement("img",{src:G})),r.createElement(V,{onClick:function(){return t(X)}},"Launch Sandbox"));default:return null}}())};const W=function(e){var t=e.children,n=(0,B.K)(),a=r.useState(!0),o=a[0],i=a[1],u=r.useState(),c=u[0],s=u[1],p=r.useState(),f=p[0],d=p[1],v=r.useState(!1),m=v[0],h=v[1],b=r.useMemo((function(){return o?"unknown":(0,w.M)(c)}),[o,c]);r.useEffect((function(){o||n("DevSandbox Signup Status",{status:b})}),[o,b]);var y=r.useRef();y.current=function(){return e=void 0,t=void 0,r=function(){var e,t;return function(e,t){var n,r,a,o,i={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return o={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function u(o){return function(u){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(a=2&o[0]?r.return:o[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,o[1])).done)return a;switch(r=0,a&&(o=[2&o[0],a.value]),o[0]){case 0:case 1:a=o;break;case 4:return i.label++,{value:o[1],done:!1};case 5:i.label++,r=o[1],o=[0];continue;case 7:o=i.ops.pop(),i.trys.pop();continue;default:if(!((a=(a=i.trys).length>0&&a[a.length-1])||6!==o[0]&&2!==o[0])){i=0;continue}if(3===o[0]&&(!a||o[1]>a[0]&&o[1]<a[3])){i.label=o[1];break}if(6===o[0]&&i.label<a[1]){i.label=a[1],a=o;break}if(a&&i.label<a[2]){i.label=a[2],i.ops.push(o);break}a[2]&&i.ops.pop(),i.trys.pop();continue}o=t.call(e,i)}catch(e){o=[6,e],r=0}finally{n=a=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,u])}}}(this,(function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),[4,R()];case 1:return e=n.sent(),x()(e,c)||s(e),d(void 0),i(!1),[3,3];case 2:return t=n.sent(),d("An error occurred retrieving registration status. ".concat(l(t))),i(!1),[3,3];case 3:return[2]}}))},new((n=void 0)||(n=Promise))((function(a,o){function i(e){try{c(r.next(e))}catch(e){o(e)}}function u(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,u)}c((r=r.apply(e,t||[])).next())}));var e,t,n,r},r.useEffect((function(){var e;null===(e=y.current)||void 0===e||e.call(y)}),[]);var g=!m;r.useEffect((function(){if(g){var e=setInterval((function(){var e;null===(e=y.current)||void 0===e||e.call(y)}),1e4);return function(){clearInterval(e)}}}),[g]);var E=r.useMemo((function(){return{setError:d,setSignupData:s,setShowUserSignup:h}}),[]),S=r.useMemo((function(){return[{error:f,signupData:c,showUserSignup:m,status:b},E]}),[f,c,m,b,E]);return r.createElement(w.u.Provider,{value:S},m?r.createElement(Z,{initialStatus:b,onClose:function(e){n("DevSandbox Signup Closed"),e&&s(e),h(!1)}}):null,t)},H=function(){var e=(0,g.Z)().updateDocumentTitle;return(0,r.useEffect)((function(){(0,h.JH)().register({notifications:y.ee}),e("Developer Sandbox")}),[]),a().createElement(r.Fragment,null,a().createElement(b.ZP,null),a().createElement(W,null,a().createElement(m,null)))}},7434:(e,t,n)=>{n.d(t,{Z:()=>u});var r=n(3264),a=n(1242),o=n(2749),i=function(){return i=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},i.apply(this,arguments)};const u=function(e){var t=e.onClick,n=e.analytics,u=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var a=0;for(r=Object.getOwnPropertySymbols(e);a<r.length;a++)t.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(e,r[a])&&(n[r[a]]=e[r[a]])}return n}(e,["onClick","analytics"]),c=(0,o.K)();return r.createElement(a.Button,i({},u,{onClick:n?function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];c(n.event,n.properties),null==t||t.apply(void 0,e)}:t}))}},2749:(e,t,n)=>{n.d(t,{K:()=>o});var r=n(3264),a=n(5140),o=function(){var e=(0,a.Z)().analytics;return r.useCallback((function(t,n){null==e||e.track(t,n)}),[e])}},6239:(e,t,n)=>{n.d(t,{S:()=>c});var r=n(3719),a=n(8573),o=n.n(a),i=n(4885),u=function(e,t,n){if(n||2===arguments.length)for(var r,a=0,o=t.length;a<o;a++)!r&&a in t||(r||(r=Array.prototype.slice.call(t,0,a)),r[a]=t[a]);return e.concat(r||Array.prototype.slice.call(t))};function c(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return(0,r.JH)({},u([o(),(0,i.ZP)({errorDescriptionKey:["detail","stack"]})],e,!0))}},9026:(e,t,n)=>{n.d(t,{M:()=>a,u:()=>r});var r=n(3264).createContext(null),a=function(e){return null==e?"new":!0===e.status.ready?"ready":!1===e.status.ready&&e.status.verificationRequired?"verify":!1===e.status.ready&&"Provisioning"===e.status.reason?"provisioning":"pending-approval"}}}]);
//# sourceMappingURL=../sourcemaps/539.5f7286d815a03617224ca672dda1803b.js.map